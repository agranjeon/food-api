# Generated by Okty.io
version: '3.6'
services:
    php:
        build: docker/php
        working_dir: /app
        volumes:
            - './:/app'

    nginx:
        image: nginx:1.14-alpine
        ports:
            - '127.0.0.1:80:80'
        volumes:
            - './:/app'
            - './docker/nginx/default.conf:/etc/nginx/conf.d/default.conf:ro'

    composer:
        image: 'composer:1.8'
        command: install
        volumes:
            - './:/app'

    db:
        image: 'mysql:5.7.28'
        environment:
            - MYSQL_DATABASE=${DB_NAME}
            - MYSQL_USER=${DB_USER}
            - MYSQL_PASSWORD=${DB_PASSWORD}
            - MYSQL_RANDOM_ROOT_PASSWORD=yes
        volumes:
            - mysqlData:/var/lib/mysql
        ports:
            - '127.0.0.1:3306:3306'

    adminer:
        image: 'adminer:4.7'
        ports:
            - '127.0.0.1:8080:8080'

    swagger:
        image: swaggerapi/swagger-ui
        environment:
            SWAGGER_JSON: /swagger.yml
        volumes:
            - ./swagger.yml:/swagger.yml:ro
        ports:
            - '127.0.0.1:8081:8080'


volumes:
    mysqlData: ~
